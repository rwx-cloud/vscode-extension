# ðŸ”„ Comprehensive References Test File
# Tests both YAML aliases and task dependencies in one file

# YAML Aliases Section
aliases:
  - &common_env
    NODE_ENV: production
    LOG_LEVEL: info
    
  - &build_config
    timeout-minutes: 15
    retry: 2

base:
  os: ubuntu 24.04
  tag: 1.0

tasks:
  # Base tasks with anchors and references
  - key: setup           # ðŸŽ¯ Find references: used by validate, test, deploy
    run: npm install
    env: *common_env      # ðŸŽ¯ Go to definition: jumps to &common_env
    <<: *build_config     # ðŸŽ¯ Go to definition: jumps to &build_config
    
  - key: validate        # ðŸŽ¯ Find references: used by test, deploy  
    use: setup            # ðŸŽ¯ Go to definition: jumps to setup task
    run: npm run validate
    env: *common_env      # ðŸŽ¯ Another reference to common_env
    
  - key: build           # ðŸŽ¯ Find references: used by test, deploy
    use: validate         # ðŸŽ¯ Go to definition: jumps to validate task  
    run: npm run build
    <<: *build_config     # ðŸŽ¯ Another reference to build_config
    
  - key: test            # ðŸŽ¯ Find references: used by deploy
    use: [setup, validate, build]  # ðŸŽ¯ Multiple task references in array
    run: npm test
    env: *common_env      # ðŸŽ¯ Third reference to common_env
    
  - key: deploy          # ðŸŽ¯ Find references: no uses (end of chain)
    use: [setup, validate, test]   # ðŸŽ¯ Multiple task references  
    run: npm run deploy

# ðŸ§ª Testing Matrix:
#
# YAML Anchors & Aliases:
# â”œâ”€ &common_env (line 6)    â†’ Shift+F12 should find 3 *common_env uses (lines 17, 23, 33)
# â”œâ”€ &build_config (line 10) â†’ Shift+F12 should find 2 *build_config uses (lines 18, 29)
# â”œâ”€ *common_env (any line)  â†’ F12 should jump to &common_env, Shift+F12 shows all uses
# â””â”€ *build_config (any)     â†’ F12 should jump to &build_config, Shift+F12 shows all uses
#
# Task Dependencies:
# â”œâ”€ setup (line 15)     â†’ Shift+F12 should find 3 uses (lines 21, 31, 36)
# â”œâ”€ validate (line 20)  â†’ Shift+F12 should find 3 uses (lines 26, 31, 36)  
# â”œâ”€ build (line 25)     â†’ Shift+F12 should find 2 uses (lines 31, 36)
# â”œâ”€ test (line 30)      â†’ Shift+F12 should find 1 use (line 36)
# â”œâ”€ deploy (line 35)    â†’ Shift+F12 should find 0 uses (terminal task)
# â””â”€ Any task in use:    â†’ F12 should jump to task definition
#
# Combined Testing:
# 1. Test that YAML alias references don't interfere with task references
# 2. Test that task references don't interfere with YAML alias references  
# 3. Verify both work correctly in the same file
# 4. Test mixed usage patterns (arrays, single values, merge operators)